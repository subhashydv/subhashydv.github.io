<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Intro to Kafka -
Hugo Atlantic</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://subhashydv.github.io/favicon-32x32.png><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Fira+Mono&family=Lato:wght@300;400;700&family=Source+Sans+Pro&display=swap" rel=stylesheet><meta name=description content="A tool that allows devs to play with distributed system"><meta property="og:title" content="Intro to Kafka"><meta property="og:type" content="website"><meta property="og:url" content="https://subhashydv.github.io/blog/2023/09/intro-to-kafka/"><meta property="og:image" content="https://subhashydv.github.io/images/kafka.png"><meta property="og:description" content="A tool that allows devs to play with distributed system"><meta name=twitter:card content="summary"><meta name=twitter:site content="@zerostaticio"><meta name=twitter:creator content="@zerostaticio"><link rel=stylesheet href="/css/dist/style.min.efc526e68ba78a4bf585989fdfdb3dcc64e53878fd2c9676a72beca9a8bde216.css" integrity="sha256-78Um5ounikv1hZif39s9zGTlOHj9LJZ2pyvsqai94hY="></head><body class=page><div id=menu-container class="bg-blue-600 h-screen w-screen fixed z-50 py-6 bg-gradient-to-b from-green-400 to-blue-500 opacity-90 overflow-hidden hidden"><div class="container mx-auto px-6 md:px-4 relative flex flex-col items-center justify-around"><div id=menu-close role=button class="top-1 right-5 absolute hover:opacity-70 cursor:pointer text-white"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 48 48"><path fill="currentcolor" d="M39.486328 6.9785156a1.50015 1.50015.0 00-1.046875.4609375L24 21.878906 9.5605469 7.4394531A1.50015 1.50015.0 008.484375 6.984375 1.50015 1.50015.0 007.4394531 9.5605469L21.878906 24 7.4394531 38.439453a1.50015 1.50015.0 102.1210938 2.121094L24 26.121094 38.439453 40.560547a1.50015 1.50015.0 102.121094-2.121094L26.121094 24 40.560547 9.5605469A1.50015 1.50015.0 0039.486328 6.9785156z"/></svg></div><div class="flex flex-col text-center text-white text-3xl font-light"><a class="py-2 hover:opacity-70" href=/>Home</a>
<a class="py-2 hover:opacity-70" href=/posts/>Blog</a>
<a class="py-2 hover:opacity-70" href=/about/>About</a></div></div></div><div class="container mx-auto px-6 md:px-4"><header class="flex bg-white items-center justify-between py-6"><div class="hidden md:block"><a class="flex items-center hover:opacity-70 transition duration-300 ease-in-out" href=https://subhashydv.github.io/><img class=mr-2 height=100 width=100 alt=" Logo" src=/images/logo/logo.png><h2 class="text-2xl font-sans font-semibold">Supreme Viki</h2></a></div><div class="block md:hidden"><a class="flex items-center hover:opacity-70 transition duration-300 ease-in-out" href=https://subhashydv.github.io/><img height=100 width=100 alt=" Logo" src=/images/logo/logo.png><h2 class="text-2xl font-sans font-semibold">Supreme Viki</h2></a></div><button class="hover:opacity-70 transition duration-300 ease-in-out text-black" id=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 48 48"><path fill="currentcolor" d="M5.5 9a1.50015 1.50015.0 100 3h37a1.50015 1.50015.0 100-3H5.5zm0 13.5a1.50015 1.50015.0 100 3h37a1.50015 1.50015.0 100-3H5.5zM5.5 36a1.50015 1.50015.0 100 3h37a1.50015 1.50015.0 100-3H5.5z"/></svg></button></header><div class="heading py-6 md:py-12 lg:w-10/12 md:text-center mx-auto"><div class="font-medium text-gray-700">Sep 17, 2023</div><h1 class="heading text-4xl md:text-6xl font-bold font-sans md:leading-tight">Intro to Kafka</h1><h2 class="text-xl text-gray-600 mt-2">A tool that allows devs to play with distributed system</h2></div><img width=600 height=600 src=/images/kafka.png><div class="flex flex-col md:flex-row py-6 md:py-12"><div class="w-full md:w-3/12 pr-3"><div class="hidden md:block"><a class="p-1 px-3 mr-1 mb-1 inline-block text-xs font-mono rounded bg-green-200 text-green-800 hover:bg-blue-200 hover:text-blue-800 transition duration-300 ease-in-out" href=/categories/tech>Tech</a>
<a class="p-1 px-3 mr-1 mb-1 inline-block text-xs font-mono rounded bg-green-200 text-green-800 hover:bg-blue-200 hover:text-blue-800 transition duration-300 ease-in-out" href=/categories/kafka>Kafka</a></div></div><div class="w-full md:w-9/12"><div class=prose><p>In this blog I will try to answer few question that we might have as a beginner. So let&rsquo;s start with our first question :</p><h3 id=what-is-kafka>What is kafka?</h3><p>So let&rsquo;s think kafka as a central hub that allows someone to host and consume the live data (stream). In kafka&rsquo;s term the host and consumer will be called producer and consumer respectively. There can be multiple producer and consumer to it.</p><h4 id=producer->Producer :</h4><p>An application that sends the data (messages) to kafka server.</p><h4 id=consumer->Consumer :</h4><p>An application that reads the message from kafka server that has been sent by producer and process them.</p><p><img src=/images/basic_kafka.png alt="basic kafka"></p><p>As we can see the above picture, there are few producer and consumer to kafka. All the producer will keep sending the messages to kafka and consumer will keep reading them from kafka. But as we can see there are more than one producer and same with consumer so how are we going to identify our message at consumer level? Won&rsquo;t there be any conflict with messages? The answer to it is yes and kafka solves it by using <strong>topic</strong>.</p><h3 id=topic->Topic :</h3><p>Topics are used to differentiate the events stored in kafka. Topics are like folder in a file system where only events related to the folder are stored for example user-data, invoices etc.</p><p><em>Similar to Topic there are few more terms that get used in kafka. So lets get familiar with those first</em> :</p><h3 id=event->Event :</h3><p>The messages that are produced to or consumed from the Kafka broker are called events. These messages are stored in the form of bytes in the brokerâ€™s disk storage. These messages can have any format. The common format is Json and Avro.</p><h3 id=broker->Broker :</h3><p>A Broker is a server which has Kafka running on it and is responsible for the communication between multiple services. Multiple brokers will form a Kafka cluster. Kafka maintains multiple broker because of three main reason : speed, durability and scalability. The recommended minimum default broker is 3 in kafka cluster.</p><h3 id=partition->Partition :</h3><p>A topic can be further divided into partitions in order to attain higher throughput. It is the smallest storage unit which holds a subset of data of a topic. In simple terms we create partitions to distribute the load on a topic.</p><p><img src=/images/partition.png alt="Topic Partition"></p><h3 id=replication-factor->Replication Factor :</h3><p>Replica of a partition is a backup for the partition. The replication factor of a topic decides that how many replicas of a partition in that topic should be maintained by the Kafka cluster. A topic with partition as 1 and replication factor as 2 would mean that two copies of the same partition with same data would be stored in the Kafka cluster.</p><h3 id=offset->Offset :</h3><p>When producer publish the message to the kafka each message get assigned a index. When consumer consume the message the index of that message get stored in kafka. This index helps kafka to keep track of which events have already been consumed by the consumer. In kafka&rsquo;s term this index is called offset.</p><h3 id=zookeeper->Zookeeper :</h3><p>Zookeeper is an extra service present in the Kafka cluster that basically maintain metadata information. for example it keeps track of which brokers are part of the Kafka cluster. It is used by Kafka brokers to determine which broker is the leader of a given partition and topic and perform leader elections. Some default config are as follows :</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>dataDir=../tmp/zookeeper
</span></span><span class=line><span class=cl>clientPort=2181
</span></span></code></pre></div><h2 id=message-flow>Message Flow</h2><p>As we have seen some basic term for kafka. Lets have a look on how a message will flow from producer to consumer.</p><p><img src=/images/flow.gif alt="flow diagram"></p><p>As we can see in the above diagram there is 1 producer and 1 consumer to kafka. We have created a topic called <em>ORDER</em>. So the producer will be sending the event on a topic called ORDER and consumer will ask for all those event constantly. As we know kafka will maintain the offset for all the event so kafka will provide event in same order as they have received. To note down here kafka won&rsquo;t be pushing the message until consumer asks for it. After receiving the message by consumer it process the message.</p><h3 id=some-common-q--a>Some Common Q & A</h3><p><strong>Q.1</strong> Does kafka works as a database as well?<br><strong>Ans</strong> Yes, Kafka works like a database system but it won&rsquo;t allow you all the capability that database has. And off course your data won&rsquo;t be available after retention period(that you defines in configuration) or size.</p><p><strong>Q.2</strong> Does kafka push the event to consumer?<br><strong>Ans</strong> No, consumer polls on the kafka for unconsumed event.</p><p><strong>Q.3</strong> How does kafka know that the event reached successfully on consumer?<br><strong>Ans</strong> Consumer acknowledge to kafka after reading the event successfully. After acknowledgement only kafka increase the offset.</p><p><em>This is all about the Basics of Kafka. will see you in next tutorial</em> :)</p></div></div></div><div class="py-6 mt-6 border-t-2 block md:hidden"><h3 class="text-sm font-medium mb-1">Categories</h3><div><a class="p-1 px-3 mr-1 mb-1 inline-block text-xs font-mono rounded bg-green-200 text-green-800 hover:bg-blue-200 hover:text-blue-800 transition duration-300 ease-in-out" href=/categories/tech>Tech</a>
<a class="p-1 px-3 mr-1 mb-1 inline-block text-xs font-mono rounded bg-green-200 text-green-800 hover:bg-blue-200 hover:text-blue-800 transition duration-300 ease-in-out" href=/categories/kafka>Kafka</a></div></div><footer class="py-6 border-t-2"><div class="container mx-auto"><div class="flex mb-2"><a class="py-2 mr-2" href=https://github.com/subhashydv><img width=24 height=24 src=https://simpleicons.org/icons/github.svg alt=Github></a></div><div class="text-sm text-gray-600"><span>By Subhash</span>
<a class=text-green-500 href=https://github.com/subhashydv>github</a></div></footer></div><script type=text/javascript src=/js/bundle.min.7d96da6b346104485ed09a6021bb756b653326d73ed3adac0c40a160ce0a4e52.js></script></body></html>